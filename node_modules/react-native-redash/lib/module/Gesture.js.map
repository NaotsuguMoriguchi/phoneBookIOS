{"version":3,"sources":["Gesture.ts"],"names":["Animated","diff","State","Platform","snapPoint","vec","proc","Clock","Value","event","add","block","cond","eq","multiply","set","stopClock","and","not","clockRunning","startClock","neq","call","reDecay","decay","reSpring","spring","onChange","debug","pinchBegan","state","OS","ACTIVE","BEGAN","pinchActive","numberOfPointers","withScaleOffset","value","offset","END","withOffset","withSpring","props","velocity","snapPoints","springConfig","config","onSnap","clock","springState","finished","position","time","toValue","damping","mass","stiffness","overshootClamping","restSpeedThreshold","restDisplacementThreshold","gestureAndAnimationIsOver","isSpringInterrupted","finishSpring","snap","withDecay","deceleration","decayState","isDecayInterrupted","finishDecay","onScrollEvent","contentOffset","nativeEvent","onGestureEvent","gestureEvent","onHandlerStateChange","panGestureHandler","createValue","translation","UNDETERMINED","gestureHandler","x","translationX","velocityX","y","translationY","velocityY","horizontalPanGestureHandler","verticalPanGestureHandler","debugGestureState","label","d","CANCELLED"],"mappings":"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","sourcesContent":["import Animated, { diff } from \"react-native-reanimated\";\nimport {\n  FlingGestureHandlerEventExtra,\n  ForceTouchGestureHandlerEventExtra,\n  GestureHandlerStateChangeNativeEvent,\n  LongPressGestureHandlerEventExtra,\n  PanGestureHandlerEventExtra,\n  PinchGestureHandlerEventExtra,\n  RotationGestureHandlerEventExtra,\n  State,\n  TapGestureHandlerEventExtra,\n} from \"react-native-gesture-handler\";\n\nimport { Platform } from \"react-native\";\nimport { snapPoint } from \"./Animations\";\nimport { vec } from \"./Vectors\";\n\nconst {\n  proc,\n  Clock,\n  Value,\n  event,\n  add,\n  block,\n  cond,\n  eq,\n  multiply,\n  set,\n  stopClock,\n  and,\n  not,\n  clockRunning,\n  startClock,\n  neq,\n  call,\n  decay: reDecay,\n  spring: reSpring,\n  onChange,\n  debug,\n} = Animated;\n\n// See: https://github.com/kmagiera/react-native-gesture-handler/issues/553\nexport const pinchBegan = proc((state: Animated.Node<State>) =>\n  Platform.OS === \"android\"\n    ? cond(eq(diff(state), State.ACTIVE - State.BEGAN), eq(state, State.ACTIVE))\n    : eq(state, State.BEGAN)\n);\n\nexport const pinchActive = proc(\n  (state: Animated.Node<State>, numberOfPointers: Animated.Node<number>) =>\n    and(\n      eq(state, State.ACTIVE),\n      eq(numberOfPointers, 2),\n      Platform.OS === \"android\" ? not(pinchBegan(state)) : 1\n    )\n);\n\nexport const withScaleOffset = (\n  value: Animated.Node<number>,\n  state: Animated.Node<State>,\n  offset: Animated.Value<number> = new Value(1)\n) =>\n  cond(\n    eq(state, State.END),\n    [set(offset, multiply(offset, value)), offset],\n    multiply(offset, value)\n  );\n\nexport const withOffset = (\n  value: Animated.Node<number>,\n  state: Animated.Node<State>,\n  offset: Animated.Value<number> = new Value(0)\n) =>\n  cond(\n    eq(state, State.END),\n    [set(offset, add(offset, value)), offset],\n    add(offset, value)\n  );\n\ninterface PrivateSpringConfig extends Animated.SpringConfig {\n  toValue: Animated.Value<number>;\n}\n\ntype SpringConfig = Omit<Animated.SpringConfig, \"toValue\">;\n\nexport interface WithSpringParams {\n  value: Animated.Adaptable<number>;\n  velocity: Animated.Adaptable<number>;\n  state: Animated.Node<State>;\n  snapPoints: Animated.Adaptable<number>[];\n  offset?: Animated.Value<number>;\n  config?: SpringConfig;\n  onSnap?: (value: readonly number[]) => void;\n}\n\nexport const withSpring = (props: WithSpringParams) => {\n  const {\n    value,\n    velocity,\n    state,\n    snapPoints,\n    offset,\n    config: springConfig,\n    onSnap,\n  } = {\n    offset: new Value(0),\n    ...props,\n  };\n  const clock = new Clock();\n  const springState: Animated.SpringState = {\n    finished: new Value(0),\n    velocity: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  };\n\n  const config: PrivateSpringConfig = {\n    toValue: new Value(0),\n    damping: 6,\n    mass: 1,\n    stiffness: 64,\n    overshootClamping: false,\n    restSpeedThreshold: 0.01,\n    restDisplacementThreshold: 0.01,\n    ...springConfig,\n  };\n\n  const gestureAndAnimationIsOver = new Value(1);\n  const isSpringInterrupted = and(eq(state, State.BEGAN), clockRunning(clock));\n  const finishSpring = [\n    set(offset, springState.position),\n    stopClock(clock),\n    set(gestureAndAnimationIsOver, 1),\n  ];\n  const snap = onSnap\n    ? [cond(clockRunning(clock), call([springState.position], onSnap))]\n    : [];\n  return block([\n    cond(isSpringInterrupted, finishSpring),\n    cond(gestureAndAnimationIsOver, set(springState.position, offset)),\n    cond(neq(state, State.END), [\n      set(gestureAndAnimationIsOver, 0),\n      set(springState.finished, 0),\n      set(springState.position, add(offset, value)),\n    ]),\n    cond(and(eq(state, State.END), not(gestureAndAnimationIsOver)), [\n      cond(and(not(clockRunning(clock)), not(springState.finished)), [\n        set(springState.velocity, velocity),\n        set(springState.time, 0),\n        set(\n          config.toValue,\n          snapPoint(springState.position, velocity, snapPoints)\n        ),\n        startClock(clock),\n      ]),\n      reSpring(clock, springState, config),\n      cond(springState.finished, [...snap, ...finishSpring]),\n    ]),\n    springState.position,\n  ]);\n};\n\ninterface WithDecayParams {\n  value: Animated.Adaptable<number>;\n  velocity: Animated.Adaptable<number>;\n  state: Animated.Node<State>;\n  offset?: Animated.Value<number>;\n  deceleration?: number;\n}\n\nexport const withDecay = (config: WithDecayParams) => {\n  const { value, velocity, state, offset, deceleration } = {\n    offset: new Value(0),\n    deceleration: 0.998,\n    ...config,\n  };\n  const clock = new Clock();\n  const decayState = {\n    finished: new Value(0),\n    velocity: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  };\n\n  const isDecayInterrupted = and(eq(state, State.BEGAN), clockRunning(clock));\n  const finishDecay = [set(offset, decayState.position), stopClock(clock)];\n\n  return block([\n    cond(isDecayInterrupted, finishDecay),\n    cond(neq(state, State.END), [\n      set(decayState.finished, 0),\n      set(decayState.position, add(offset, value)),\n    ]),\n    cond(eq(state, State.END), [\n      cond(and(not(clockRunning(clock)), not(decayState.finished)), [\n        set(decayState.velocity, velocity),\n        set(decayState.time, 0),\n        startClock(clock),\n      ]),\n      reDecay(clock, decayState, { deceleration }),\n      cond(decayState.finished, finishDecay),\n    ]),\n    decayState.position,\n  ]);\n};\n\nexport const onScrollEvent = (contentOffset: {\n  x?: Animated.Node<number>;\n  y?: Animated.Node<number>;\n}) =>\n  event([\n    {\n      nativeEvent: {\n        contentOffset,\n      },\n    },\n  ]);\n\ntype NativeEvent = GestureHandlerStateChangeNativeEvent &\n  (\n    | PanGestureHandlerEventExtra\n    | TapGestureHandlerEventExtra\n    | LongPressGestureHandlerEventExtra\n    | RotationGestureHandlerEventExtra\n    | FlingGestureHandlerEventExtra\n    | PinchGestureHandlerEventExtra\n    | ForceTouchGestureHandlerEventExtra\n  );\n\ntype Adaptable<T> = { [P in keyof T]: Animated.Adaptable<T[P]> };\n\nexport const onGestureEvent = (\n  nativeEvent: Partial<Adaptable<NativeEvent>>\n) => {\n  const gestureEvent = event([{ nativeEvent }]);\n  return {\n    onHandlerStateChange: gestureEvent,\n    onGestureEvent: gestureEvent,\n  };\n};\n\nexport const panGestureHandler = () => {\n  const position = vec.createValue(0);\n  const translation = vec.createValue(0);\n  const velocity = vec.createValue(0);\n  const state = new Value(State.UNDETERMINED);\n  const gestureHandler = onGestureEvent({\n    x: position.x,\n    translationX: translation.x,\n    velocityX: velocity.x,\n    y: position.y,\n    translationY: translation.y,\n    velocityY: velocity.y,\n    state,\n  });\n  return {\n    position,\n    translation,\n    velocity,\n    state,\n    gestureHandler,\n  };\n};\n\nexport const horizontalPanGestureHandler = () => {\n  const x = new Value(0);\n  const translationX = new Value(0);\n  const velocityX = new Value(0);\n  const state = new Value(State.UNDETERMINED);\n  const gestureHandler = onGestureEvent({\n    translationX,\n    velocityX,\n    state,\n  });\n  return {\n    x,\n    translationX,\n    state,\n    velocityX,\n    gestureHandler,\n  };\n};\n\nexport const verticalPanGestureHandler = () => {\n  const y = new Value(0);\n  const translationY = new Value(0);\n  const velocityY = new Value(0);\n  const state = new Value(State.UNDETERMINED);\n  const gestureHandler = onGestureEvent({\n    y,\n    translationY,\n    velocityY,\n    state,\n  });\n  return {\n    y,\n    translationY,\n    state,\n    velocityY,\n    gestureHandler,\n  };\n};\n\nexport const debugGestureState = (\n  label: string,\n  state: Animated.Node<State>\n) => {\n  const d = (value: string): Animated.Node<number> =>\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    debug(label, new Value(value));\n  return onChange(\n    state,\n    cond(\n      eq(state, State.UNDETERMINED),\n      d(\"UNDETERMINED\"),\n      cond(\n        eq(state, State.BEGAN),\n        d(\"BEGAN\"),\n        cond(\n          eq(state, State.ACTIVE),\n          d(\"ACTIVE\"),\n          cond(\n            eq(state, State.END),\n            d(\"END\"),\n            cond(eq(state, State.CANCELLED), d(\"CANCELLED\"), d(\"FAILED\"))\n          )\n        )\n      )\n    )\n  );\n};\n"]}